---
import Footer from '@components/marketing/Footer.astro'
import Navigation from '@components/marketing/Navigation.astro'
import ConsentAndAnalytics from '@lib/consent-and-analytics/consent-and-analytics.astro'
import HoneyBadger from '@lib/honeybadger/web-tracking.astro'
import { Head } from 'astro-capo'
import { SEO, type SEOProps } from 'astro-seo'
import '@styles/global.css'

interface Props {
  title: string
  seo?: Omit<SEOProps, 'title'>
  showNav?: boolean
  showFooter?: boolean
}
const { title, seo, showNav = false, showFooter = true } = Astro.props as Props
---

<html lang='en'>
  <Head>
    <meta charset='utf-8' />
    <link
      rel='icon'
      type='image/svg+xml'
      href='/favicon.svg'
    />
    <meta
      name='viewport'
      content='width=device-width'
    />
    <title>{title}</title>
    <link
      rel='sitemap'
      href='/sitemap-index.xml'
    />
    <SEO {...seo} />
    <ConsentAndAnalytics />
    <HoneyBadger />
    <script src='https://js.stripe.com/v3/'></script>
    <link
      rel='stylesheet'
      id='silktide-consent-manager-css'
      href='/silktide-consent-manager.css'
    />
  </Head>
  <body class='bg-background text-foreground flex min-h-screen flex-col'>
    {showNav && <Navigation />}
    <main class='flex-1'>
      <slot />
    </main>
    {showFooter && <Footer />}
  </body>
</html>
